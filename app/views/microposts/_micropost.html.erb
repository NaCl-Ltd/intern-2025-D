<li id="micropost-<%= micropost.id %>">
  <%= link_to gravatar_for(micropost.user, size: 50), micropost.user %>
  <span class="user"><%= link_to micropost.user.name, micropost.user %></span>
  <span class="content">
    <%= micropost.content %>
    <% if micropost.image.attached? %>
      <%= image_tag micropost.image.variant(:display) %>
    <% end %>
  </span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    <% if current_user?(micropost.user) %>
      <%= link_to "delete", micropost, data: { "turbo-method": :delete,
                                                turbo_confirm: "You sure?" } %>
      <% if micropost.pinned_by_id.present? %>
        <%= link_to "固定解除", unfix_micropost_path(micropost), data: { "turbo-method": :post,
                                                                         turbo_confirm: "固定を解除しますか？" } %>
      <% else %>
        <%= link_to "固定する", fix_micropost_path(micropost), data: { "turbo-method": :post,
                                                                       turbo_confirm: "この投稿を固定しますか？" } %> 
      <% end %>                                     
    <% end %>

  </span>
  <div class="interaction">
    <span class="comment">
      <%= image_tag "chat.png", width:"20" %>
      <span style='margin-left: 5px;'>chat</span> </span>

    <span class="repost" data-controller="repost">
      <%= image_tag "retweet.png", width:"20", data: { controller:"toggle", action: "click->repost#toggle" } %>
      <span style='margin-left: 5px;'>repost</span> </span>

    <span class="like" data-controller="like">
      <%= image_tag "heart.png", width:"20", data: { controller:"toggle", action: "click->like#toggle" } %> 
      <span style='margin-left: 5px;'>like</span> </span>
      
    <span class="favorite" data-controller="favorite">
      <%= image_tag "star.png", width:"20", data: { controller:"toggle", action: "click->favorite#toggle" } %>
      <span style='margin-left: 5px;'>favorite</span> </span>
  </div>
</li>
